#!/bin/bash

# === ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ===
REPO_URL="https://github.com/felopaternady379-eng/Sonic-Lang.git"
LOCAL_DIR="$PWD"   # ุงููุฌูุฏ ุงูุญุงูู ููู ุงููุดุฑูุน
BRANCH="main"

# === ุจุฏุงูุฉ ุงูุณูุฑูุจุช ===
echo "๐ ุจุฏุก ุฑูุน ูุดุฑูุน Sonic-Lang ุนูู GitHub"

# ุงูุชุฃูุฏ ูู ูุฌูุฏ git
if ! command -v git &> /dev/null
then
    echo "โ git ุบูุฑ ูุซุจุช. ุญุงูู ุชุซุจุชู ุฃููุงู: pkg install git"
    exit 1
fi

# ุงูุงูุชูุงู ููุฌูุฏ ุงููุดุฑูุน
cd "$LOCAL_DIR" || { echo "โ ุงููุฌูุฏ ุบูุฑ ููุฌูุฏ"; exit 1; }

# ุชููุฆุฉ git ูู ูู ููู ููุฌูุฏ
if [ ! -d ".git" ]; then
    git init
    echo "โ ูุดุฑูุน Git ูุญูู ุชู ุฅูุดุงุคู"
fi

# ุฅุถุงูุฉ ูู ุงููููุงุช
git add .

# ุฅูุดุงุก commit
read -p "ุงูุชุจ ุฑุณุงูุฉ ุงูู commit: " COMMIT_MSG
git commit -m "$COMMIT_MSG"

# ุฑุจุท ุงูุฑูุจู ุงูุจุนูุฏ ูู ูู ููู ููุฌูุฏ
if ! git remote | grep -q origin; then
    git remote add origin "$REPO_URL"
    echo "โ ุชู ุฑุจุท ุงูุฑูุจู ุงูุจุนูุฏ"
fi

# ุฅูุดุงุก branch ุฑุฆูุณู
git branch -M "$BRANCH"

# ุฑูุน ุงููููุงุช
echo "๐ ูุชุญุชุงุฌ ุชุฏุฎู ุงูู GitHub Token ููููุฉ ุณุฑ ุนูุฏ ุงูุทูุจ"
git push -u origin "$BRANCH"

echo "๐ ุชู ุฑูุน ุงููุดุฑูุน ุจูุฌุงุญ!"
